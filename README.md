# 🦎 生物进化模拟器

**简体中文** | [English](./README.en.md)

一个基于 Canvas 的生态系统模拟器，展示了蚁群算法、鸟群算法（Boids）以及捕食者-猎物动态关系。

## ✨ 特性

- **四种生物类型**
  - 🐜 **蚂蚁** - 使用信息素进行觅食和通讯的蚁群算法
  - 🐦 **鸟** - 基于 Boids 算法的群体飞行行为
  - 🦡 **食蚁兽** - 追捕蚂蚁的捕食者
  - 🐍 **蛇** - 伏击型捕食者，专门捕食鸟类

- **生态系统模拟**
  - 食物链关系：植物 → 蚂蚁/鸟 → 食蚁兽/蛇
  - 能量系统：生物需要进食维持能量，能量耗尽则死亡
  - 繁殖系统：能量充足时可以繁殖后代
  - 基因遗传与变异：后代继承父母基因并产生随机变异

- **蚁群算法**
  - 信息素释放与蒸发
  - 蚂蚁通过信息素找到食物路径
  - 蚁巢系统：存储食物、生成新蚂蚁

- **鸟群算法（Boids）**
  - 分离（Separation）：避免与邻近个体碰撞
  - 对齐（Alignment）：与邻近个体保持相同方向
  - 聚合（Cohesion）：向群体中心靠拢

- **无限世界**
  - 动态扩展的世界边界
  - 摄像机缩放和拖拽
  - 触摸屏支持

## 🎮 操作说明

### 桌面端
| 操作 | 说明 |
|------|------|
| 点击地图 | 放置当前选中的物种 |
| 滚轮 | 缩放视图 |
| 右键拖拽 / Shift+左键 | 移动地图 |
| 空格 | 暂停/继续 |
| R | 重置游戏 |
| P | 切换信息素可视化 |

### 移动端
| 操作 | 说明 |
|------|------|
| 点击 | 放置物种 |
| 单指拖拽 | 移动地图 |
| 双指捏合 | 缩放视图 |

## 🚀 快速开始

1. 克隆或下载项目
2. 用浏览器打开 `index.html` 即可运行

```bash
# 或者使用本地服务器
npx serve .
# 然后访问 http://localhost:3000
```

## 📁 项目结构

```
├── index.html      # 主页面
├── styles.css      # 样式文件
├── config.js       # 游戏配置（物种参数、能量设置等）
├── main.js         # 主入口（游戏循环、事件处理、摄像机）
├── world.js        # 世界类（植物生成、边界管理）
├── creature.js     # 生物基类（通用行为和属性）
├── gene.js         # 基因系统（变异、繁殖、死亡工具类）
├── pheromone.js    # 信息素网格（蚁群算法核心）
├── ant.js          # 蚂蚁类和蚁巢类
├── bird.js         # 鸟类（Boids 算法实现）
└── predator.js     # 捕食者类（食蚁兽、蛇）
```

## ⚙️ 配置说明

在 `config.js` 中可以调整各种参数：

```javascript
const CONFIG = {
  WORLD_WIDTH: 2000,          // 世界宽度
  WORLD_HEIGHT: 1500,         // 世界高度
  FOOD_SPAWN_RATE: 0.5,       // 食物生成率
  MAX_FOOD: 120,              // 最大食物数量
  FOOD_ENERGY: 100,           // 食物能量值
  INITIAL_ENERGY: 200,        // 生物初始能量
  MOVE_COST: 0.03,            // 移动能量消耗
  MUTATION_RATE: 0.2,         // 基因变异概率
  MUTATION_AMOUNT: 0.3,       // 变异幅度
  // ...
};
```

## 🧬 基因系统

每个生物都有三个基因属性：
- **speed** - 移动速度
- **perception** - 感知范围
- **size** - 体型大小

繁殖时，后代会继承父母的基因并产生随机变异，实现自然选择和进化。

## 🔧 技术栈

- 纯原生 JavaScript（无框架依赖）
- HTML5 Canvas 2D 渲染
- 响应式设计，支持移动端

## 📜 许可证

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！
